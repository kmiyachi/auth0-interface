{"ast":null,"code":"var _jsxFileName = \"C:\\\\Dev\\\\auth0-interface\\\\frontend\\\\src\\\\Login\\\\LoginForm.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport './LoginForm.css';\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass LoginForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = e => {\n      this.setState({\n        [e.target.id]: e.target.value\n      });\n    };\n\n    this.handleUserLoginChange = event => {\n      event.preventDefault();\n      this.username = event.target.value;\n    };\n\n    this.handlePasswordLoginChange = event => {\n      event.preventDefault();\n      this.password = event.target.value;\n    };\n\n    this.redirectAfterLogin = () => {\n      if (this.state.login_success) {\n        console.log(\"redirect: \" + localStorage.getItem('loggedIn') + \" \" + this.state.login_success);\n        return React.createElement(Redirect, {\n          to: \"/Home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.username = \"\";\n    this.password = \"\";\n    this.login_error = false;\n    this.missing_info = false;\n    this.state = {\n      login_success: \"\"\n    };\n    this.onChange = this.onChange.bind(this);\n    this.handleUserLoginChange = this.handleUserLoginChange.bind(this);\n    this.handlePasswordLoginChange = this.handlePasswordLoginChange.bind(this);\n    this.callLogin = this.callLogin.bind(this);\n    this.redirectAfterLogin = this.redirectAfterLogin.bind(this);\n  }\n\n  componentDidMount() {\n    const renewSession = this.props.auth.renewSession;\n\n    if (localStorage.getItem('loggedIn') === 'true') {\n      renewSession();\n    }\n  }\n\n  auth_login() {\n    this.props.auth.login();\n  }\n\n  auth_logout() {\n    this.props.auth.logout();\n  }\n\n  callLogin() {\n    if (this.password && this.username) {\n      this.missing_info = false;\n      $.ajax({\n        url: 'http://localhost:4000/login',\n        type: 'POST',\n        contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\n        crossDomain: true,\n        dataType: 'json',\n        xhrFields: {\n          withCredentials: true\n        },\n        data: {\n          username: this.username,\n          password: this.password\n        },\n        success: data => {\n          if (data.message === \"OK\") {\n            console.log('success');\n            this.auth_login();\n            this.login_error = false;\n            this.setState({\n              login_success: true\n            });\n          } else {\n            this.login_error = true;\n            this.setState({\n              login_success: false\n            });\n            console.log('failure');\n          }\n        }\n      });\n    } else {\n      this.missing_info = true;\n      this.setState({\n        login_success: false\n      });\n    }\n  }\n\n  render() {\n    console.log(\"rendering\");\n    return React.createElement(\"div\", {\n      className: \"interface\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, this.redirectAfterLogin(), React.createElement(\"div\", {\n      className: \"loginForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      className: \"loginFormField\",\n      placeholder: \"Username\",\n      onChange: this.handleUserLoginChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"password\",\n      className: \"loginFormField\",\n      placeholder: \"Password\",\n      onChange: this.handlePasswordLoginChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }), this.login_error && !this.missing_info ? React.createElement(\"div\", {\n      className: \"error_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Either your username or password is incorrect.\") : null, this.missing_info ? React.createElement(\"div\", {\n      className: \"error_msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Please complete empty fields.\") : null, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"loginButton\",\n      value: \"Login\",\n      onClick: this.callLogin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"registerDiv\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Link, {\n      className: \"regLink\",\n      to: \"/Register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Don't have an account? Sign Up\")));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["C:\\Dev\\auth0-interface\\frontend\\src\\Login\\LoginForm.js"],"names":["React","Component","$","Link","Redirect","LoginForm","constructor","props","onChange","e","setState","target","id","value","handleUserLoginChange","event","preventDefault","username","handlePasswordLoginChange","password","redirectAfterLogin","state","login_success","console","log","localStorage","getItem","login_error","missing_info","bind","callLogin","componentDidMount","renewSession","auth","auth_login","login","auth_logout","logout","ajax","url","type","contentType","crossDomain","dataType","xhrFields","withCredentials","data","success","message","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport $ from 'jquery';\r\nimport './LoginForm.css'\r\nimport { Link, Redirect } from \"react-router-dom\";\r\n\r\nclass LoginForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.username = \"\";\r\n    this.password = \"\";\r\n    this.login_error = false;\r\n    this.missing_info = false;\r\n    this.state = {\r\n      login_success: \"\",\r\n    };\r\n\r\n    this.onChange = this.onChange.bind(this);\r\n    this.handleUserLoginChange = this.handleUserLoginChange.bind(this);\r\n    this.handlePasswordLoginChange = this.handlePasswordLoginChange.bind(this);\r\n    this.callLogin = this.callLogin.bind(this);\r\n    this.redirectAfterLogin = this.redirectAfterLogin.bind(this);\r\n  }\r\n  \r\n  onChange = e => {\r\n    this.setState({\r\n      [e.target.id]: e.target.value\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { renewSession } = this.props.auth;\r\n\r\n    if (localStorage.getItem('loggedIn') === 'true') {\r\n      renewSession();\r\n    }\r\n  }\r\n\r\n  auth_login() {\r\n    this.props.auth.login();\r\n  }\r\n\r\n  auth_logout() {\r\n    this.props.auth.logout();\r\n  }\r\n\r\n  handleUserLoginChange = event => {\r\n    event.preventDefault()\r\n    this.username = event.target.value;\r\n  }\r\n\r\n  handlePasswordLoginChange = event => {\r\n    event.preventDefault()\r\n    this.password = event.target.value;\r\n  }\r\n\r\n  callLogin() {\r\n    if (this.password && this.username) {\r\n      this.missing_info = false;\r\n      $.ajax({\r\n        url: 'http://localhost:4000/login',\r\n        type: 'POST',\r\n        contentType: 'application/x-www-form-urlencoded; charset=UTF-8',\r\n        crossDomain: true,\r\n        dataType: 'json',\r\n        xhrFields: { withCredentials: true },\r\n        data: {\r\n          username: this.username,\r\n          password: this.password\r\n        },\r\n        success: (data) => {\r\n          if (data.message === \"OK\") {\r\n            console.log('success');\r\n            this.auth_login()\r\n            this.login_error = false;\r\n            this.setState({ login_success: true });\r\n          } else {\r\n            this.login_error = true;\r\n            this.setState({ login_success: false });\r\n            console.log('failure');\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.missing_info = true;\r\n      this.setState({ login_success: false });\r\n    }\r\n  }\r\n\r\n  redirectAfterLogin = () => {\r\n    if (this.state.login_success) {\r\n      console.log(\"redirect: \" + localStorage.getItem('loggedIn') + \" \" + this.state.login_success);\r\n      return (\r\n        <Redirect to='/Home' />\r\n      );\r\n    }\r\n  }\r\n\r\n  render() {\r\n    console.log(\"rendering\")\r\n    return (\r\n      <div className=\"interface\">\r\n        {this.redirectAfterLogin()}\r\n        <div className=\"loginForm\">\r\n          <input type=\"text\" className=\"loginFormField\" placeholder=\"Username\" onChange={this.handleUserLoginChange} />\r\n          <br></br>\r\n          <input type=\"password\" className=\"loginFormField\" placeholder=\"Password\" onChange={this.handlePasswordLoginChange} />\r\n          {this.login_error && !this.missing_info ?\r\n            <div className=\"error_msg\">Either your username or password is incorrect.</div>\r\n            : null\r\n          }\r\n          {this.missing_info ?\r\n            <div className=\"error_msg\">Please complete empty fields.</div>\r\n            : null\r\n          }\r\n          <div>\r\n            <input type=\"submit\" className=\"loginButton\" value=\"Login\" onClick={this.callLogin}></input>\r\n          </div>\r\n        </div>\r\n        <div className=\"registerDiv\">\r\n          <Link className=\"regLink\" to=\"/Register\">Don't have an account? Sign Up</Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}